# Allow read in the public directories.
<Directory "C:/graphictoria/COMMIT_HASH/web/public/">
	Require local
	AllowOverride All
</Directory>
<Directory "C:/graphictoria/COMMIT_HASH/web/public_api/">
	Require local
	AllowOverride All
</Directory>

# Defaults for the proceding virtualhosts on *.gtoria.net
<VirtualHost *:80 *:443>
	ServerAdmin admin@gtoria.net
	ServerName gtoria.net
	
	ServerAlias www.gtoria.net
	ServerAlias wiki.gtoria.net
	
	SSLEngine on
	SSLCertificateFile "C:/graphictoria/COMMIT_HASH/etc/cert/localhost.crt"
    SSLCertificateKeyFile "C:/graphictoria/COMMIT_HASH/etc/cert/localhost.key"
	
	ErrorLog "C:/graphictoria/logs/gt-test-error.log"
	LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Host}i\" \"%{Referer}i\" \"%{User-agent}i\"" gtoria
	CustomLog "C:/graphictoria/logs/gt-test-access.log" gtoria
	
	RewriteEngine On
	RewriteCond %{HTTP_HOST} !^www\. [NC]
	RewriteRule ^(.*)$ https://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
	
	RewriteCond %{HTTPS} off
	RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI}
	
	DocumentRoot "D:/wamp320/graphictoria/sitetest3/web/public"
</VirtualHost>

# Api endpoints.
<VirtualHost *:80 *:443>
	ServerAlias api.gtoria.net
	ServerAlias apis.gtoria.net
	ServerAlias assetgame.gtoria.net
	ServerAlias data.gtoria.net
	ServerAlias gamepersistence.gtoria.net
	ServerAlias clientsettings.api.gtoria.net
	ServerAlias ephemeralcounters.api.gtoria.net
	ServerAlias versioncompatibility.api.gtoria.net
	ServerAlias logging.service.gtoria.net
	ServerAlias ecsv2.gtoria.net
	ServerAlias test.public.ecs.gtoria.net
	
	SSLEngine on
	SSLCertificateFile "C:/graphictoria/COMMIT_HASH/etc/cert/localhost.crt"
    SSLCertificateKeyFile "C:/graphictoria/COMMIT_HASH/etc/cert/localhost.key"
	
	ErrorLog "C:/graphictoria/logs/gt-test-error.log"
	LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Host}i\" \"%{Referer}i\" \"%{User-agent}i\"" gtoria
	CustomLog "C:/graphictoria/logs/gt-test-access.log" gtoria
	
	DocumentRoot "D:/wamp320/graphictoria/sitetest3/web/public_api"
</VirtualHost>